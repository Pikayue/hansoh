var Agile=A={version:"2.1.1",$:window.Zepto||jQuery,settings:{transitionType:"slide",transitionTime:250,transitionTimingFunc:"ease-in",toastDuration:3000,showPageLoading:false,basePagePath:"./",basePageSuffix:".html",crossDomainHandler:null,isAutoRender:false,slidingException:".sliding_container",lazyloadPlaceholder:""},mode:window.innerWidth<800?"phone":"tablet",hasTouch:"ontouchstart" in window,launchCompleted:false,hasAsideMenuOpen:false,hasPopupOpen:false,hasModalOpen:false,launch:function(a){$.extend(this.settings,a);this.Element.init();this.Router.init();this.AsideMenu.init();this.launchCompleted=true}};A.Element=(function($){var init=function(selector){if(selector){_initFormElement(selector);_init_scroll(selector.parents('article[data-scroll="true"]'))}else{_init_section();_init_article();_init_modal()}};var _initFormElement=function(selector){var $el=$(selector||"body");if($el.length==0){return}for(var k in FORM_SELECTOR){$.map(_getMatchElements($el,FORM_SELECTOR[k].selector),function(el){var $obj=$(el);if($obj.attr("__form_element_init__")){return}FORM_SELECTOR[k].handler(el);$obj.attr("__form_element_init__",true)})}$el=null};var _getMatchElements=function($el,selector){return $el.find(selector).add($el.filter(selector))};var _init_section=function(){$(document).on("pageload","section",function(e){var $el=$(this);$el.data("__pageload_tag__",true);var func=$el.data("pageload");if(func){eval(func)}if(A.settings.isAutoRender){_init_inject($el)}if($el.data("article-slider")==true){var isSwipe=true;$el.on("touchstart","article",function(e){isSwipe=true;if($(e.target).parents(A.settings.slidingException).length>0){isSwipe=false}});$el.on("swipeRight","article",function(){var currentArticle=$(this);if(isSwipe){A.Transition.transArticle($el,currentArticle,currentArticle.prev("article"))}});$el.on("swipeLeft","article",function(atcObj){var currentArticle=$(this);if(isSwipe){A.Transition.transArticle($el,currentArticle,currentArticle.next("article"))}})}_init_scroll_orientation($el)});$(document).on("pageshow","section",function(e){var $el=$(this);if(!$el.data("__pageload_tag__")){$el.trigger("pageload")}var func=$el.data("pageshow");if(func){eval(func)}});$(document).on("pagehide","section",function(e){var $el=$(this);var func=$el.data("pagehide");if(func){eval(func)}if($el.data("cache")==false){$el.remove()}})};var _init_article=function(){$(document).on("articleshow",'article[data-scroll="true"]',function(){A.Element.scroll(this)});$(document).on("articleload","article",function(e){var $el=$(this);$el.data("__articleload_tag__",true);_initFormElement($el);_init_scroll_orientation($el);var func=$el.data("articleload");if(func){eval(func)}if($el.data("slider-page")){var key=A.cache.index++;$el.attr("__slider_page__",key);A.cache["__slider_page__"+key]=new A.Slider({selector:$el,container:$el,siliders:$el.find("[data-slider-page]"),showDots:false,onAfterSlide:function(i){var $target=$el.find('[data-role="slider-page"]:eq('+i+")").addClass("active").trigger("sliderpageshow");$target.siblings(".active").removeClass("active").trigger("sliderpagehide");var $section=$target.parents("section");var $refer=$section.find('[data-target="sliderPage"][href="#'+$target.attr("id")+'"]').addClass("active");$refer.siblings(".active").removeClass("active");A.Element.initScrollOrientation($refer.parents('[data-scroll-orientation="horizontal"]'),$refer)}})}});$(document).on("articleshow","article",function(e){var $el=$(this);if($el.data("title")){$el.parents("section").first().find("header .title").first().html(A.Util.script($el.data("title")))}_init_lazyload($el);if(!$el.data("__articleload_tag__")){$el.trigger("articleload")}var func=$el.data("articleshow");if(func){eval(func)}});$(document).on("articlehide","article",function(e){var $el=$(this);var func=$el.data("articlehide");if(func){eval(func)}if($el.data("cache")==false){$el.remove()}})};var _init_modal=function(){$(document).on("modalload",".modal",function(e){var $el=$(this);var func=$el.data("modalload");if(func){eval(func)}});$(document).on("modalshow",".modal",function(e){var $el=$(this);var showTag=$el.data("__modalshow_tag__");if(!showTag){$el.trigger("modalload");$el.data("__modalshow_tag__",true)}var func=$el.data("modalshow");if(func){eval(func)}});$(document).on("modalhide",".modal",function(e){var $el=$(this);var func=$el.data("modalhide");if(func){eval(func)}if($el.data("cache")==false){$el.remove()}})};var _init_scroll=function(selector){$.map(_getMatchElements($(selector),SELECTOR.scroll.selector),SELECTOR.scroll.handler)};var _init_scroll_orientation=function(el,targetObj){var $el=$(el);var orientation=$el.data("scroll-orientation");if(!orientation){$.map(_getMatchElements($el,SELECTOR.scrollOrientation.selector),SELECTOR.scrollOrientation.handler)}else{if(orientation=="horizontal"){setTimeout(function(){var scroller=A.Scroll($el,{hScroll:true,hScrollbar:false}).scroller;if(targetObj.length>0){scroller.scrollToElement(targetObj[0])}},1)}else{if(orientation=="vertical"){SELECTOR.scroll.handler(el)
}}}};var _init_inject=function(el){var $el=$(el);if(!$el.data("inject")){$.map(_getMatchElements($el,SELECTOR.inject.selector),SELECTOR.inject.handler);return}var tag="#"+$el.attr("id");if($el.attr("__inject_cache__")){return}$el.render()};var _init_lazyload=function(el){var $el=$(el);var source=$el.data("source");if(!source){$.map(_getMatchElements($el,SELECTOR.lazyload.selector),SELECTOR.lazyload.handler);return}var placeholder=$el.attr("placeholder")||A.settings.lazyloadPlaceholder;if(!$el.attr("src")&&placeholder){$el.attr("src",placeholder)}var eTop=$el.offset().top;var validateDistance=100;var winHeight=$(window).height()+validateDistance;if(eTop<0||eTop>winHeight){return}var _injectImg=function(data){if(!$el.data("source")){return}$el.attr("src",data);$el.removeAttr("data-source");_init_scroll($("section.active article[data-scroll]"))};var type=$el.data("type");if(type=="base64"){A.ajax({url:source,success:function(data){_injectImg(data)},isBlock:false})}else{var img=new Image();img.src=source;if(img.complete){_injectImg(source);img=null}else{img.onload=function(){_injectImg(source);img=null}}}};var _init_toggle=function(el){var $el=$(el);if($el.find("div.toggle-handle").length>0){return}var name=$el.attr("name");var onValue=$el.data("on-value");onValue=typeof onValue=="undefined"?"":onValue;var offValue=$el.data("off-value");offValue=typeof offValue=="undefined"?"":offValue;if(name){$el.append('<input type="hidden" name="'+name+'" value="'+($el.hasClass("active")?onValue:offValue)+'"/>')}$el.append('<div class="toggle-handle"></div>');$el.tap(function(){var $t=$(this),v=$t.hasClass("active")?offValue:onValue;$t.toggleClass("active").trigger("toggle",[v]);$t.find("input").val(v)})};var _init_checkbox=_init_radio=function(el){$(el).tap(function(e){try{var $el=$(this);var checkObj=$el.find("input")[0];checkObj.checked=!checkObj.checked}catch(e){}return false})};var SELECTOR={section:{selector:"section",handler:_init_section},article:{selector:"article",handler:_init_article},scroll:{selector:'[data-scroll="true"]',handler:function(el){var zoom=$(el).data("zoom");var tag=zoom==true?true:false;setTimeout(function(){A.Scroll(el,{zoom:tag,hScroll:tag,onScrollEnd:function(){_init_lazyload(el)}})},1)}},inject:{selector:'[data-inject="true"]',handler:_init_inject},lazyload:{selector:"img[data-source]",handler:_init_lazyload},scrollOrientation:{selector:"[data-scroll-orientation]",handler:_init_scroll_orientation}};var FORM_SELECTOR={toggle:{selector:".toggle",handler:_init_toggle},checkbox:{selector:'[data-role="checkbox"]',handler:_init_checkbox},radio:{selector:'[data-role="radio"]',handler:_init_radio}};var _addFormSelector=function(type,selector,handler){FORM_SELECTOR[type]={selector:selector,handler:handler}};return{init:init,initForm:_initFormElement,scroll:_init_scroll,addFormSelector:_addFormSelector,initInject:_init_inject,initLazyload:_init_lazyload,initScrollOrientation:_init_scroll_orientation}})(A.$);A.AsideMenu=(function(e){var d,g,c;var f=function(){d=e("#aside_container");g=e("#section_container");if(e("#section_container_mask").length==0){c=e('<div id="section_container_mask"></div>').appendTo("#section_container")}c.on("tap",a);var n,i,l;var h=function(o){var p=o.touches[0];n={pageX:p.pageX,pageY:p.pageY,time:Number(new Date())};i=0;l=true};var m=function(o){if(!l){return}var p=o.touches[0];i=p.pageX-n.pageX};var k=function(p){if(!l){return}if(Math.abs(i)<6){return}var q=i>0?"right":"left";var o=e("#aside_container aside.active");if(o.data("position")==q){a()}l=false};c.on({"touchstart":h,"touchmove":m,"touchend":k,"touchcancel":k});d.on("tap",".aside-close",a);var j=true;e(document).on("touchstart","section.active[data-aside-left],section.active[data-aside-right]",function(o){j=true;if(e(o.target).parents(A.settings.slidingException).length>0){j=false}});e(document).on("swipeRight","section.active[data-aside-left]",function(o){if(!j){return}b(e(this).data("aside-left"))});e(document).on("swipeLeft","section.active[data-aside-right]",function(o){if(!j){return}b(e(this).data("aside-right"))})};var b=function(j){var i=e(j).addClass("active"),n=i.data("transition"),h=i.data("position")||"left",l=i.data("show-close"),k=i.width(),m=h=="left"?k+"px":"-"+k+"px";if(l&&i.find("div.aside-close").length==0){i.append('<div class="aside-close icon icomoon-close"></div>')}A.Element.scroll(i);if(n=="overlay"){A.anim(i,{translateX:"0%"})}else{if(n=="reveal"){A.anim(g,{translateX:m})}else{A.anim(i,{translateX:"0%"});A.anim(g,{translateX:m})}}e("#section_container_mask").show();A.hasAsideMenuOpen=true};var a=function(k,n){var i=e("#aside_container aside.active"),m=i.data("transition"),h=i.data("position")||"left",l=h=="left"?"-100%":"100%";var j=function(){i.removeClass("active");A.hasAsideMenuOpen=false;n&&n.call(this)};if(m=="overlay"){A.anim(i,{translateX:l},k,j)}else{if(m=="reveal"){A.anim(g,{translateX:"0"},k,j)}else{A.anim(i,{translateX:l},k);A.anim(g,{translateX:"0"},k,j)}}e("#section_container_mask").hide()
};return{init:f,show:b,hide:a}})(A.$);A.Page=(function(b){var d=function(e){e=e?e:"";if(e.indexOf("#")==0){e=A.settings.basePagePath+e.replace("#","")+A.settings.basePageSuffix}return e};var a=function(e){return e.indexOf("#")==0?e.substr(1):e};var c=function(g,h){if(typeof g=="string"){g=A.Util.parseHash(g)}if(!g||!g.url){h&&h(null);return}var e=d(g.url);var f={url:e,timeout:20000,type:"GET",success:function(i){h&&h(i)},error:function(i){h&&h("")},isBlock:false};return A.ajax(f)};return{loadContent:c,formatURL:d}})(A.$);A.Router=(function(e){var h=[];var p=function(){e(window).on("popstate",a);e(document).on("click","a",function(s){var r=e(this).data("target"),q=e(this).attr("href");if(!q||q.match(/^#/)||r){s.preventDefault();return false}});e(document).on("tap","[data-target]",k);j()};var j=function(){var r=e("#section_container section").first();var q="#"+r.attr("id");o(q)};var a=function(r){if(r.state&&r.state.hash){var q=r.state.hash;if(h[1]&&q===h[1].hash){A.hasAsideMenuOpen&&A.AsideMenu.hide();A.hasPopupOpen&&A.Popup.close();f()}else{return}}else{return}};var k=function(){var s=e(this),r=s.data("target"),q=s.attr("href");if(m[r]){m[r](q,s)}};var o=function(q){var t=A.Util.parseHash(q);q=t.tag;var s=t.hash;if(A.hasAsideMenuOpen){A.AsideMenu.hide(200,function(){o(s)});return}var u=function(){var v=true;if(h.length==0){r.trigger("pageinit").trigger("pageshow").data("init",true).find("article.active").trigger("articleshow")}else{var w=h[0];if(w.hash===t.hash){return}v=(w.tag==t.tag);if(v){r.trigger("pageshow").find("article.active").trigger("articlehide")}else{n(w.tag,t.tag)}}d(s,v)};var r=e(q);if(r.length==0){if(A.settings.showPageLoading){A.showMask()}A.Page.loadContent(t,function(v){var w=e("<div>"+v+"</div>").find(q).data("source");A.Page.loadContent(w,function(y){if(A.settings.showPageLoading){A.hideMask()}if(w){y=A.Util.formatJSON(y);var x=template.compile(v);v=x(y)}if(e(q).length==0){e("#section_container").append(v)}r=e(q);u()})})}else{u()}};var f=function(){var r=h.shift().tag;var q=h[0].tag;n(r,q,true)};var n=function(s,r,q){A.Transition.run(s,r,q)};var d=function(r,q){var s=A.Util.parseHash(r);if(h.length>0&&e(h[0].tag).data("cache")==false){q=true}if(q){h.shift(s);window.history.replaceState(s,"",r)}else{window.history.pushState(s,"",r)}h.unshift(s)};var i=function(q,r){$el=e(r||"section.active:first");var u=A.Util.parseHash(q);q=u.tag;var s=$el.is("section")?$el:$el.parents("section").first();var t=s.find(q);var v=function(){if(t.hasClass("active")){return}var y=t.attr("id");if(y){s.find('a[data-target="article"]').each(function(B){$refer=e(this);var z=A.Util.parseHash($refer.attr("href"));if(z.tag=="#"+y){$refer.addClass("active")}else{$refer.removeClass("active")}})}else{$el.addClass("active").siblings(".active").removeClass("active")}var x=t;var w=t.addClass("active").siblings(".active");if(s.data("article-slider")){A.Transition.transArticle(s,w,x)}else{A.Transition.change({target:x,current:w,trigger:"article"})}};if(t.length==0){if(A.settings.showPageLoading){A.showMask()}A.Page.loadContent(u,function(w){var x=e("<div>"+w+"</div>").find(q).data("source");A.Page.loadContent(x,function(z){if(A.settings.showPageLoading){A.hideMask()}if(x){z=A.Util.formatJSON(z);var y=template.compile(w);w=y(z)}if(s.find(q).length==0){s.append(w)}t=s.find(q);v()})})}else{v()}};var l=function(q){A.hasAsideMenuOpen?A.AsideMenu.hide():A.AsideMenu.show(q)};var g=function(r){var s=A.Util.parseHash(r);r=s.tag;var q=function(t){var u=e(t);if(u.hasClass("active")){A.hasModalOpen=false;u.removeClass("active").trigger("modalhide").find("article").trigger("articleshow")}else{A.hasModalOpen=u;u.addClass("active").trigger("modalshow").find("article").trigger("articlehide")}};if(e(r).length==0){if(A.settings.showPageLoading){A.showMask()}A.Page.loadContent(s,function(t){var u=e("<div>"+t+"</div>").find(r).data("source");A.Page.loadContent(u,function(w){if(A.settings.showPageLoading){A.hideMask()}if(u){w=A.Util.formatJSON(w);var v=template.compile(t);t=v(w)}e("body").append(t);q(r)})})}else{q(r)}};var b=function(q){var u=e(q);if(u.length==0){return}var s=u.parents("article");var r=s.attr("__slider_page__");var t=A.cache["__slider_page__"+r];if(t){t.index(u.index())}};var m={section:o,article:i,aside:l,back:function(){window.history.go(-1)},modal:g,sliderPage:b};var c=function(r,q){m[r]=q};return{init:p,goTo:o,showArticle:i,back:f,showModal:g,add:c,history:function(){return h},showSliderPage:b}})(A.$);A.Template=(function(c){var a=function(h,i,g){var f='<div class="back-mask"><div class="icon '+g+'"></div><div>'+i+"</div></div>";c(h).html(f)};var d=function(f){a(f,"没有找到相关数据","drawer")};var e=function(f){a(f,"加载中...","cloud-download")};var b=function(f,h,k,j){var i=c(f),j=j||"replace";if(c.type(k)=="array"&&k.length==0){d(i)}else{var g=c(template(h,k));if(j=="replace"){i.html(g)}else{i.append(g)}A.Element.init(g)}};return{render:b,background:a,loading:e,no_result:d}})(A.$);A.Toast=(function(c){var f="toast",b,a,i={toast:'<a href="#">{value}</a>',success:'<a href="#"><i class="icon icomoon-checkmark-circle"></i>{value}</a>',error:'<a href="#"><i class="icon icomoon-cancel-circle"></i>{value}</a></div>',info:'<a href="#"><i class="icon icomoon-info-2"></i>{value}</a>'};
var g=function(){c("body").append('<div id="agile_toast"></div>');b=c("#agile_toast");d()};var e=function(){A.anim(b,"scaleOut",function(){b.hide();b.empty()})};var h=function(j,m,l){if(a){clearTimeout(a)}var k=j.split(/\s/);f=k[0];b.attr("class",j).html(i[f].replace("{value}",m)).show();A.anim(b,"scaleIn");if(l!==0){a=setTimeout(e,l||A.settings.toastDuration)}};var d=function(){b.on("tap",'[data-target="close"]',function(){e()})};g();return{show:h,hide:e}})(A.$);A.Transition=(function(g){var l,b,c,a,f={slide:[["slideLeftOut","slideLeftIn"],["slideRightOut","slideRightIn"]],cover:[["","slideLeftIn"],["slideRightOut",""]],slideUp:[["","slideUpIn"],["slideDownOut",""]],slideDown:[["","slideDownIn"],["slideUpOut",""]],popup:[["","scaleIn"],["scaleOut",""]],flip:[["slideLeftOut","flipOut"],["slideRightOut","flipIn"]]};var k=function(){b.trigger("beforepagehide",[l]);c.trigger("beforepageshow",[l]);var n="anim "+(a[0]||"empty"),m="anim animating "+(a[1]||"empty");b.bind("webkitAnimationEnd",function(){i(n,m)}).addClass(n);c.addClass(m)};var i=function(n,m){b.off("webkitAnimationEnd");c.off("webkitAnimationEnd");b.removeClass(n).removeClass("active");c.removeClass(m).addClass("active");!c.data("init")&&c.trigger("pageinit").data("init",true);!b.data("init")&&b.trigger("pageinit").data("init",true);b.trigger("pagehide",[l]);c.trigger("pageshow",[l]);b.find("article.active").trigger("articlehide");c.find("article.active").trigger("articleshow");b=c=null};var e=function(p,o,m){g(":focus").trigger("blur");l=m;b=g(p);c=g(o);var n=l?b.attr("data-transition"):c.attr("data-transition");n=n||A.settings.transitionType;a=l?f[n][1]:f[n][0];k()};var d=function(n,p,o,q,m){if(f[n]){console.error("该转场动画已经存在，请检查你自定义的动画名称(名称不能重复)");return}f[n]=[[p,o],[q,m]]};var h=function(o){var n=g(o.target);var m=g(o.current);var p=n.data("transition");var q=n.data("transition");p=f[p]?f[p][0][1]:"empty";q=f[q]?f[q][0][0]:"empty";A.anim(n,p,function(){n.addClass("active");if(o.trigger){n.trigger(o.trigger+"show")}});A.anim(m,q,function(){m.removeClass("active");if(o.trigger){m.trigger(o.trigger+"hide")}})};var j=function(q,p,o){if(!o||o.length==0){return}var n,m;m=p.index()<o.index()?"left":"right";n=m=="left"?"Left":"Right";A.anim(p,"slide"+n+"Out",function(){p.removeClass("active").trigger("articlehide")});A.anim(o,"slide"+n+"In",function(){o.addClass("active").trigger("articleshow");var r=o.attr("id");if(!r){return}q.find('a[data-target="article"]').each(function(u){var t=g(this);var s=A.Util.parseHash(t.attr("href"));if(s.tag=="#"+r){t.addClass("active");A.Element.initScrollOrientation(t.parents('[data-scroll-orientation="horizontal"]'),t)}else{t.removeClass("active")}})})};return{run:e,add:d,change:h,transArticle:j}})(A.$);A.Util=(function($){var parseHash=function(hash){var url=hash;url=_script(url);var tag,query,param={};var arr=hash.split("?");tag=arr[0];if(arr.length>1){var seg,s;query=arr[1];seg=query.split("&");for(var i=0;i<seg.length;i++){s=seg[i].split("=");param[s[0]]=s[1]}}if(tag.indexOf("#")!=0){var p=A.Util.parseURL(url);if(p.getFragment()){tag="#"+p.getFragment()}else{var tags=tag.split("/");tag=tags[tags.length-1];tag="#"+tag.split(".")[0]}hash=tag+(arr.length>1?"?"+arr[1]:"");url=url.replace(new RegExp(tag,"g"),"")}return{url:url,hash:hash,tag:tag,query:query,param:param}};var _formatJSON=function(data){return data?(typeof data=="string"?eval("("+data+")"):data):{}};var formatDate=function(date,format){var o={"M+":date.getMonth()+1,"d+":date.getDate(),"h+":date.getHours(),"m+":date.getMinutes(),"s+":date.getSeconds(),"q+":Math.floor((date.getMonth()+3)/3),"S":date.getMilliseconds()};if(/(y+)/.test(format)){format=format.replace(RegExp.$1,(date.getFullYear()+"").substr(4-RegExp.$1.length))}for(var k in o){if(new RegExp("("+k+")").test(format)){format=format.replace(RegExp.$1,RegExp.$1.length==1?o[k]:("00"+o[k]).substr((""+o[k]).length))}}return format};var URLParser=function(url){this._fields={"Username":4,"Password":5,"Port":7,"Protocol":2,"Host":6,"Pathname":8,"URL":0,"Querystring":9,"Fragment":10};this._values={};this._regex=null;this.version=0.1;this._regex=/^((\w+):\/\/)?((\w+):?(\w+)?@)?([^\/\?:]+):?(\d+)?(\/?[^\?#]+)?\??([^#]+)?#?(\w*)/;for(var f in this._fields){this["get"+f]=this._makeGetter(f)}if(typeof url!="undefined"){this._parse(url)}};URLParser.prototype.setURL=function(url){this._parse(url)};URLParser.prototype._initValues=function(){for(var f in this._fields){this._values[f]=""}};URLParser.prototype._parse=function(url){this._initValues();var r=this._regex.exec(url);if(!r){throw"DPURLParser::_parse -> Invalid URL"}for(var f in this._fields){if(typeof r[this._fields[f]]!="undefined"){this._values[f]=r[this._fields[f]]}}};URLParser.prototype._makeGetter=function(field){return function(){return this._values[field]}};var _isCrossDomain=function(url){if(!url||url.indexOf(":")<0){return false}var urlOpts=A.Util.parseURL(url);if(!urlOpts.getProtocol()){return false}return !((location.protocol.replace(":","")+location.host)==(urlOpts.getProtocol()+urlOpts.getHost()+":"+urlOpts.getPort()))
};var _script=function(str){return str?str.trim().replace(/\$\{([^\}]*)\}/g,function(s,s1){try{return eval(s1.trim())}catch(e){return""}}):""};var checkBoolean=function(){var result=false;for(var i=0;i<arguments.length;i++){if(typeof arguments[i]=="boolean"){return arguments[i]}}return result};var _eval=function(str){str=(str||"").trim();var obj={};str.replace(/\$\{(.*]*)\}/g,function(s,s1){obj=eval("("+s1.trim()+")");return""});return obj};var _ajax=function(opts){if(!opts||!opts.url){return}opts.url=_script(opts.url);var random="__ajax_random__="+Math.random();opts.url+=(opts.url.split(/\?|&/i).length==1?"?":"&")+random;var _isBlock=A.Util.checkBoolean(opts.isBlock,A.settings.showPageLoading);var ajaxData={url:opts.url,timeout:20000,type:opts.type||"get",dataType:opts.dataType||"text",success:function(html){opts.success&&opts.success(html);if(_isBlock){A.hideMask()}},error:function(html){opts.error&&opts.error(null);if(_isBlock){A.hideMask()}}};var isCross=_isCrossDomain(opts.url);var handler=$.ajax;if(isCross){ajaxData.dataType="jsonp";handler=A.settings.crossDomainHandler||handler}if(ajaxData.dataType.toLowerCase()=="jsonp"){ajaxData.jsonp=opts.jsonp||"__jsonpcallback"}if(_isBlock){A.showMask()}handler(ajaxData)};return{parseHash:parseHash,formatDate:formatDate,formatJSON:_formatJSON,parseURL:function(url){return new URLParser(url)},isCrossDomain:_isCrossDomain,script:_script,eval:_eval,ajax:_ajax,checkBoolean:checkBoolean}})(A.$);(function(){A.cache={};A.cache.index=0;A.cache.set=function(b,a){window.localStorage.setItem(b,JSON.stringify(a))};A.cache.get=function(a){return JSON.parse(window.localStorage.getItem(a))};A.cache.remove=function(a){window.localStorage.removeItem(a)}})();(function($){A.anim=function(el,animName,duration,ease,callback){var d,e,c;var len=arguments.length;for(var i=2;i<len;i++){var a=arguments[i];var t=$.type(a);t=="number"?(d=a):(t=="string"?(e=a):(t=="function")?(c=a):null)}$(el).animate(animName,d||A.settings.transitionTime,e||A.settings.transitionTimingFunc,c)};A.showMask=function(text,closeCallback){if(typeof text=="function"){closeCallback=text;text=""}A.Popup.loading(text,closeCallback)};A.hideMask=function(){A.Popup.close(true)};A.showToast=function(text,type,duration){type=type||"toast";A.Toast.show(type,text,duration)};A.hideToast=function(){A.Toast.hide()};A.alert=function(title,content){A.Popup.alert(title,content)};A.confirm=function(title,content,okCall,cancelCall){A.Popup.confirm(title,content,okCall,cancelCall)};A.popup=function(options){A.Popup.show(options)};A.closePopup=function(){A.Popup.close()};A.popover=function(html,pos,arrowDirection,onShow){A.Popup.popover(html,pos,arrowDirection,onShow)};A.tmpl=function(containerSelector,templateId,data,type){A.Template.render(containerSelector,templateId,data,type)};A.ajax=A.Util.ajax;A.render=function(opts){var options={container:null,tmpl:null,tmplSource:null,tmplId:null,data:null,dataSource:null,type:"after",callback:function(){}};$.extend(options,opts);var handleHTML=function(opts,callback){if(opts.tmpl){callback(opts.tmpl)}else{var url=opts.tmplId||opts.tmplSource;if(!url){callback("");return}var html="";var hashObj=A.Util.parseHash(url);var $script=$(hashObj.tag);var scriptKey="__TEMPLATE_"+hashObj.tag+"__";if(A.cache[scriptKey]){callback(A.cache[scriptKey])}else{if($script.length==0){A.Page.loadContent(hashObj,function(h){html=h||"";callback(html);A.cache[scriptKey]=html})}else{if($script.html().trim()==""&&$script.attr("src")){A.Page.loadContent($script.attr("src"),function(h){html=h||"";$script.text(html);callback($script);A.cache[scriptKey]=$script})}else{html=$script;callback(html);A.cache[scriptKey]=html}}}}};var handleData=function(opts,callback){if(opts.data){callback(typeof opts.data=="string"?A.Util.eval(opts.data):opts.data)}else{if(opts.dataSource){var hashObj=A.Util.parseHash(opts.dataSource);A.Page.loadContent(hashObj,function(data){data=A.Util.formatJSON(data);callback(data)})}else{callback({})}}};handleHTML(options,function(html){var $target,type=options.type||"after";var $html=$(html);if(!$html.is("script")){options.container=$html;$html=$('<script type="text/html"><\/script>').append($html.html())}var typeMap={replace:"html",after:"append",before:"prepend"};if(options.container&&options.container.length>0){var $target=$(options.container)}else{for(var k in typeMap){var container=$html.data(k);if(container){$target=$(container);type=k;break}}}var _isShowBlock=false;_isShowBlock=A.Util.checkBoolean($html.data("loading")||_isShowBlock);if(_isShowBlock){A.showMask()}handleData(options,function(o){if(!o||o=={}||o==[]){options.callback("");return}try{html=$(template.compile($html.html())(o))}catch(e){html=""}if($target&&$target.length>0){$target[typeMap[type]](html);A.Element.init(html)}options.callback(html);if(_isShowBlock){A.hideMask()}})})}})(A.$);A.Popup=(function(f){var c,o,l,h,j={"top":{top:0,left:0,right:0},"top-second":{top:"44px",left:0,right:0},"center":{top:"50%",left:"5%",right:"5%","border-radius":"3px"},"bottom":{bottom:0,left:0,right:0},"bottom-second":{bottom:"51px",left:0,right:0}},d={top:["slideDownIn","slideUpOut"],bottom:["slideUpIn","slideDownOut"],defaultAnim:["bounceIn","bounceOut"]},q={alert:'<div class="popup-title">{title}</div><div class="popup-content">{content}</div><div id="popup_btn_container"><a data-target="closePopup" data-icon="icomoon-checkmark">{ok}</a></div>',confirm:'<div class="popup-title">{title}</div><div class="popup-content">{content}</div><div id="popup_btn_container"><a class="cancel" data-icon="icomoon-close">{cancel}</a><a data-icon="icomoon-checkmark">{ok}</a></div>',loading:'<i class="icon icomoon-spinner5 spinner"></i><p>{title}</p>'};
var n=function(){f("body").append('<div id="agile_popup"></div><div id="agile_popup_mask"></div>');o=f("#agile_popup_mask");c=f("#agile_popup");m()};var p=function(t){var v={height:undefined,width:undefined,opacity:0.3,url:null,tplId:null,tplData:{},html:"",pos:"center",clickMask2Close:true,showCloseBtn:true,arrowDirection:undefined,animation:true,timingFunc:"linear",duration:200,onShow:undefined,onHide:undefined,onClose:undefined};f.extend(v,t);h=v.clickMask2Close;o.css("opacity",v.opacity);c.attr({"style":"","class":""});v.width&&c.width(v.width);v.height&&c.height(v.height);var w=f.type(v.pos);if(w=="object"){c.css(v.pos);l=d["defaultAnim"]}else{if(w=="string"){if(j[v.pos]){c.css(j[v.pos]);var s=v.pos.indexOf("top")>-1?"top":(v.pos.indexOf("bottom")>-1?"bottom":"defaultAnim");l=d[s]}else{c.addClass(v.pos);l=d["defaultAnim"]}}else{return}}o.show();var u;if(v.html){u=v.html}else{if(v.url){u=A.Page.loadContent(v.url)}else{if(v.tplId){u=template(v.tplId,v.tplData)}}}if(v.showCloseBtn){u+='<div id="tag_close_popup" data-target="closePopup" class="icon icomoon-cancel-circle"></div>'}if(v.arrowDirection){c.addClass("arrow "+v.arrowDirection);c.css("padding","8px");if(v.arrowDirection=="top"||v.arrowDirection=="bottom"){l=d[v.arrowDirection]}}c.html(u).show();A.Element.init(c);v.onShow&&v.onShow.call(c);f(document).trigger("popupshow",[c]);v.onHide&&f(document).on("popuphide",function(){v.onHide();v.onHide=undefined});v.onClose&&f(document).on("popupclose",function(){v.onClose();v.onClose=undefined});if(v.pos=="center"){var r=c.height();c.css("margin-top","-"+r/2+"px")}if(v.animation){A.anim(c,l[0],v.duration,v.timingFunc)}A.hasPopupOpen=true};var g=function(r){o.hide();if(l&&!r){A.anim(c,l[1],200,function(){c.hide().empty();A.hasPopupOpen=false})}else{c.hide().empty();A.hasPopupOpen=false}f(document).trigger("popuphide")};var m=function(){var r=function(){g();f(document).trigger("popupclose")};o.on("tap",function(){h&&r()});c.on("tap",'[data-target="closePopup"]',function(){r()})};var k=function(t,s,u){var r=q.alert.replace("{title}",t).replace("{content}",s).replace("{ok}",u||"确定");p({html:r,pos:"center",clickMask2Close:false,showCloseBtn:false})};var a=function(v,t,u,r){var s=q.confirm.replace("{title}",v).replace("{content}",t).replace("{cancel}","取消").replace("{ok}","确定");p({html:s,pos:"center",clickMask2Close:false,showCloseBtn:false});f('#popup_btn_container [data-icon="icomoon-checkmark"]').tap(function(){g();u.call(this)});f('#popup_btn_container [data-icon="icomoon-close"]').tap(function(){g();r.call(this)})};var i=function(r,u,s,t){p({html:r,pos:u,showCloseBtn:false,arrowDirection:s,onShow:t})};var e=function(s,t){var r=q.loading.replace("{title}",s||"加载中...");p({html:r,pos:"loading",opacity:0.1,animation:true,clickMask2Close:false,onClose:t})};var b=function(s){var r='<div class="actionsheet">';f.each(s,function(t,u){r+='<button class="button block bg-nephritis white" style="background-color: '+u.color+' !important;">'+u.text+"</button>"});r+='<button class="button block bg-alizarin white">取消</button>';r+="</div>";p({html:r,pos:"bottom",showCloseBtn:false,onShow:function(){f(this).find("button").each(function(u,t){f(t).on("tap",function(){if(s[u]&&s[u].handler){s[u].handler.call(t)}g()})})}})};n();return{show:p,close:g,alert:k,confirm:a,popover:i,loading:e,actionsheet:b}})(A.$);(function(a){var b=function(r,d){var n={months:["01月","02月","03月","04月","05月","06月","07月","08月","09月","10月","11月","12月"],days:["日","一","二","三","四","五","六"],swipeable:true,date:new Date(),onRenderDay:undefined,onSelect:undefined},q=this,v=a(r),e,c,i,l,u,p;var k=function(){q.settings=a.extend({},n,d);u=q.settings.date.getFullYear();p=q.settings.date.getMonth();l=new Date(u,p,q.settings.date.getDate());j();h()};var s=function(w){return(new Date(w.getFullYear(),w.getMonth(),1)).getDay()};var t=function(w){return(new Date(w.getFullYear(),w.getMonth()+1,0)).getDate()};var j=function(){var x="";x+='<div class="agile-calendar">';x+=f(u,p);x+=g();x+='<div class="agile-calendar-body">';x+=m(l);x+="</div></div>";v.html(x);var w=v.find("span");e=w.eq(0);c=w.eq(1);i=v.find(".agile-calendar-body")};var f=function(x,y){var w='<div class="agile-calendar-nav">';w+='<div><i class="icon icomoon-arrow-left8 __previous" data-year='+x+"></i><span>"+x+'</span><i class="icon icomoon-arrow-right8 __next" data-year='+x+"></i></div>";w+='<div><i class="icon icomoon-arrow-left8 __previous" data-month='+y+"></i> <span>"+q.settings.months[y]+'</span><i class="icon icomoon-arrow-right8 __next" data-month='+y+"></i></div>";w+="</div>";return w};var g=function(){var x="<table><thead><tr>";for(var w=0;w<7;w++){x+="<th>"+q.settings.days[w]+"</th>"}x+="</tr></thead></table>";return x};var m=function(y){var w=s(y),E=t(y),D=Math.ceil((w+E)/7),C,B="";u=y.getFullYear();p=y.getMonth();C=new Date(u,p,1-w);B+="<table><tbody>";for(var z=0;z<D;z++){B+="<tr>";for(var x=0;x<7;x++){B+=o(C,p);C.setDate(C.getDate()+1)}B+="</tr>"}B+="</tbody></table>";return B};var o=function(x,C){var z=(x.getMonth()!==C);
var w=q.format(x);var B=(q.format(q.settings.date)==w)?"active":"";var y=x.getDate();if(q.settings.onRenderDay){y=q.settings.onRenderDay.call(null,y,w)}return z?"<td>&nbsp;</td>":'<td data-selected="selected" class="'+B+'" data-date= '+w+">"+y+"</td>"};var h=function(){var w,x;v.on("tap",function(z){w=a(z.target);if(w.is("[data-year].__next")){l.setFullYear(l.getFullYear()+1);q.refresh(l)}else{if(w.is("[data-year].__previous")){l.setFullYear(l.getFullYear()-1);q.refresh(l)}else{if(w.is("[data-month].__next")){l.setMonth(l.getMonth()+1);q.refresh(l)}else{if(w.is("[data-month].__previous")){l.setMonth(l.getMonth()-1);q.refresh(l)}}}}x=w.closest("td");if(!w.is("td")&&x.length>0){w=x}if(w.is("td")){var y=w.data("date");if(y&&q.settings.onSelect){q.settings.onSelect.call(q,y)}}});v.on("swipeLeft",function(){l.setMonth(l.getMonth()+1);q.refresh(l)});v.on("swipeRight",function(){l.setMonth(l.getMonth()-1);q.refresh(l)})};this.refresh=function(z){var B=new Date(u,p,1),x=new Date(z.getFullYear(),z.getMonth(),1),C=undefined,y;if(B.getTime()==x.getTime()){return}C=B<x?"slideLeftRound":"slideRightRound";e.text(z.getFullYear());c.text(this.settings.months[z.getMonth()]);var w=m(z);A.anim(i,C,function(){i.html(w)})};k()};b.prototype.parse=function(d){var c=/^(\d{4})(?:\-|\/)(\d{1,2})(?:\-|\/)(\d{1,2})$/;return c.test(d)?new Date(parseInt(RegExp.$1,10),parseInt(RegExp.$2,10)-1,parseInt(RegExp.$3,10)):null};b.prototype.format=function(e){var g=e.getFullYear(),c=e.getMonth()+1,f=e.getDate();c=(c<10)?("0"+c):c;f=(f<10)?("0"+f):f;return g+"-"+c+"-"+f};A.Calendar=b})(A.$);(function(c){var a={},b=1;A.Scroll=function(e,i){var d,f,h=c(e),g={hScroll:false,bounce:true,lockDirection:true,useTransform:true,useTransition:false,checkDOMChanges:false,hideScrollbar:true,fadeScrollbar:true,zoom:false,onBeforeScrollStart:function(k){var j=k.target;while(j.nodeType!=1){j=j.parentNode}if(j.tagName!="SELECT"&&j.tagName!="INPUT"&&j.tagName!="TEXTAREA"){k.preventDefault()}}};f=h.data("_jscroll_");if(f&&a[f]){d=a[f];c.extend(d.scroller.options,i);d.scroller.refresh();return d}else{f="_jscroll_"+b++;h.data("_jscroll_",f);c.extend(g,i);scroller=new iScroll(h[0],g);return a[f]={scroller:scroller,destroy:function(){scroller.destroy();delete a[f]}}}}})(A.$);(function(b){function a(r,u){var y=function(){},k=function(){return true},t=false,g=0,s=200,f,h,m,o,d,e,x,q,v=0;var p=this;if(b.isPlainObject(r)){f=b(r.selector);u=r.showDots;k=r.onBeforeSlide||k;y=r.onAfterSlide||y;q=r.autoPlay;v=r.interval||3000;s=r.speed||s;m=r.container;o=r.slides}else{f=b(r)}var i=function(){m=m?m:f.children().first();o=o?o:m.children();d=o.length;e=f.offset().width;m.css("width",d*e).attr("__is_slider__",true);o.css({"width":e,"float":"left"}).show();if(u==undefined){u=true}u&&l();n(0,0);y(0);q&&w()};var w=function(){setTimeout(function(){if(g==d-1){n(0)}else{p.next()}w()},v)};var l=function(){h=f.find(".dots");if(h.length>0){h.show()}else{var E=d*20;var D='<div class="dots"><ul>';for(var C=0;C<d;C++){D+='<li index="'+C+'"';if(C==0){D+='class="active"'}D+='><a href="#"></a></li>'}D+="</ul></div>";f.append(D);h=f.find(".dots");h.children().css("width",E+"px");h.find("li").on("tap",function(){var F=b(this).attr("index");n(parseInt(F),s)})}};var n=function(C,D){D=D||s;m.css({"-webkit-transition-duration":D+"ms","-webkit-transform":"translate3D("+-(C*e)+"px,0,0)"});if(g!=C){g=C;if(h){b(h.find("li").get(g)).addClass("active").siblings().removeClass("active")}y(g)}};var B=function(){m.on("touchstart",z,false);m.on("touchmove",c,false);m.on("touchend",j,false)};var z=function(C){var D=C.touches[0];start={pageX:D.pageX,pageY:D.pageY,time:Number(new Date())};isScrolling=undefined;x=0;m[0].style.webkitTransitionDuration=0;t=true;if(b(C.target).closest("[__is_slider__]")[0]==m[0]){t=true}else{t=false}};var c=function(D){if(!t){return}var E=D.touches[0];x=E.pageX-start.pageX;if(typeof isScrolling=="undefined"){isScrolling=Math.abs(x)<Math.abs(E.pageY-start.pageY)}if(!isScrolling){D.preventDefault();var C=!g&&x>0||g==d-1&&x<0;if(C){return}var F=(x-g*e);m[0].style.webkitTransform="translate3D("+F+"px,0,0)"}};var j=function(E){var D=(Number(new Date())-start.time<250&&Math.abs(x)>20)||Math.abs(x)>e/3;var C=!g&&x>0||g==d-1&&x<0;if(!isScrolling){if(k(g,x)){n(g+(D&&!C?(x<0?1:-1):0),s)}else{n(g)}}t=false};i();B();this.refresh=function(){m.attr("style","");i()};this.prev=function(){if(g){n(g-1,s)}};this.next=function(){if(g<d-1){n(g+1,s)}};this.index=function(C){n(C)}}A.Slider=a})(A.$);(function(d){var a={},c=1;function b(f,m,o){var k,i,j,n,e,h,q,p={selector:undefined,type:"pullDown",minPullHeight:10,pullText:"下拉刷新更多",releaseText:"松开加载更新",refreshText:"加载中请稍后",refreshTip:false,onPullIcon:"icomoon-arrow-down2",onReleaseIcon:"icon-reverse",onRefreshIcon:"icomoon-spinner5 spinner",callback:undefined};if(typeof f==="object"){d.extend(p,f)}else{p.selector=f;p.type=m;p.callback=o;if(m==="pullUp"){d.extend(p,{pullText:"上拉加载更多",releaseText:"松开加载更新",refreshText:"加载中请稍后",onPullIcon:"icomoon-arrow-up2"})}}q=p.type==="pullDown"?true:false;
var l=function(s){i=d(s.selector).children()[0];var r='<div class="refresh-container"><span class="refresh-icon carrot '+s.onPullIcon+'"></span><span class="refresh-label sliver">'+s.pullText+"</span>"+(s.refreshTip?'<div class="refresh-tip">'+s.refreshTip+"</div>":"")+"</div>";if(q){j=d(r).prependTo(i)}else{j=d(r).appendTo(i)}h=j.height();n=j.find(".refresh-icon");e=j.find(".refresh-label")};var g=function(r){return A.Scroll(r.selector,{topOffset:q?h:0,bounce:true,onScrollMove:function(){if(!q&&this.y>=0){}else{if(this.y>r.minPullHeight&&q&&!n.hasClass(r.onReleaseIcon)){n.addClass(r.onReleaseIcon);e.html(r.releaseText);this.minScrollY=0}else{if(this.y<r.minPullHeight&&q&&n.hasClass(r.onReleaseIcon)){n.removeClass(r.onReleaseIcon);e.html(r.pullText);this.minScrollY=-h}else{if(this.y<(this.maxScrollY-r.minPullHeight)&&!q&&!n.hasClass(r.onReleaseIcon)){n.addClass(r.onReleaseIcon);e.html(r.releaseText);this.maxScrollY=this.maxScrollY}else{if(this.y>(this.maxScrollY+r.minPullHeight)&&!q&&n.hasClass(r.onReleaseIcon)){n.removeClass(r.onReleaseIcon);e.html(r.pullText);this.maxScrollY=h}}}}}},onScrollEnd:function(){if(n.hasClass(r.onReleaseIcon)){n.removeClass(r.onReleaseIcon).removeClass(r.onPullIcon).addClass(r.onRefreshIcon);e.html(r.refreshText);var s=this;setTimeout(function(){r.callback.call(s)},1)}},onRefresh:function(){n.removeClass(r.onRefreshIcon).addClass(r.onPullIcon);e.html(r.pullText)}})};l(p);k=g(p);return k}A.Refresh=function(e,i,j){var h,g;if(e.selector){h=d(e.selector)}else{h=d(e)}g=h.data("_refresh_");if(g&&a[g]){return a[g]}else{g="_refresh_"+c++;h.data("_refresh_",g);var f=new b(e,i,j);return a[g]={scroller:f.scroller,destroy:function(){delete a[g];f.scroller.destroy();d(".refresh-container",e).remove()}}}}})(A.$);(function(a){a.fn.render=function(f){var e=a(this);if(!e.data("inject")){return}var d={data:null,dataSource:e.data("source")};a.extend(d,f);delete d.container;if(!(d.data||d.dataSource)){return}var c="#"+e.attr("id");d.tmplId=c;d.callback=function(i){var g=e;var h=a('[__inject_dependence__="'+c+'"]');if(d.type=="replace"){a('[__inject_dependence__="'+c+'"]').remove()}else{if(d.type=="after"){g=h.length==0?e:h.last()}else{if(d.type=="before"){}}}e.attr("__inject_cache__",true);g.after(a(i).attr("__inject_dependence__",c));A.Element.init(e.parent());if(f&&f.callback){f.callback(i)}};A.render(d)};a.fn.renderReplace=function(c,d){b(this,"replace",c,d)};a.fn.renderAfter=function(c,d){b(this,"after",c,d)};a.fn.renderBefore=function(c,d){b(this,"before",c,d)};function b(d,c,f,g){if(typeof f=="function"&&g==null){g=f;f=null}var e={};e.type=c;if(typeof f=="string"){e.dataSource=f}else{if(typeof f=="object"){e.data=f}}e.callback=g;a(d).render(e)}})(A.$);(function(){if(JSON){JSON.stringify=function(c){var b=[];if(typeof c=="string"){return'"'+c.replace(/([\'\"\\])/g,"\\$1").replace(/(\n)/g,"\\n").replace(/(\r)/g,"\\r").replace(/(\t)/g,"\\t")+'"'}if(typeof c=="undefined"){return""}if(typeof c!="object"){return c.toString()}if(c===null){return null}if(c instanceof Array){for(var a=0;a<c.length;a++){b.push(this.stringify(c[a]))}b="["+b.join()+"]"}else{for(var a in c){b.push('"'+a+'":'+this.stringify(c[a]))}b="{"+b.join()+"}"}return b}}})();